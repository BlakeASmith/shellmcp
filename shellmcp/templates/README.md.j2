# {{ config.server.name }}

{{ config.server.desc }}

## Installation

### Option 1: Using Virtual Environment (Recommended)

1. **Create a virtual environment**:
```bash
python3 -m venv venv
```

**Note**: On Ubuntu/Debian systems, if you get an "ensurepip is not available" error, install the python3-venv package first:
```bash
sudo apt install python3-venv
```

2. **Activate the virtual environment**:
   - **Linux/macOS**:
   ```bash
   source venv/bin/activate
   ```
   - **Windows**:
   ```cmd
   venv\Scripts\activate
   ```

3. **Install dependencies**:
```bash
pip install -r requirements.txt
```

4. **Run the server**:
```bash
python {{ config.server.name.replace('-', '_') }}_server.py
```

5. **Deactivate when done** (optional):
```bash
deactivate
```

### Option 2: System-wide Installation

1. **Install dependencies**:
```bash
pip install -r requirements.txt
```

2. **Run the server**:
```bash
python {{ config.server.name.replace('-', '_') }}_server.py
```

## Amazon Q CLI Configuration

The generated `amazon-q-config.json` file contains the configuration needed to integrate this server with Amazon Q CLI for enhanced AI assistance.

### Quick Setup

1. **Install Amazon Q CLI**: `curl -sSL https://amazon-q-cli.s3.amazonaws.com/install.sh | bash`
2. **Configure AWS credentials**: `aws configure` or `aws sso login`
3. **Copy Amazon Q configuration** from the generated `amazon-q-config.json` file
4. **Add to Amazon Q CLI configuration**:
   - **Linux/macOS**: `~/.config/amazon-q/cli-config.json`
   - **Windows**: `%APPDATA%\Amazon\Q\cli-config.json`
5. **Start Amazon Q CLI**: `amazon-q`
6. **Use `@tools` command** to access your MCP tools

### Configuration Parameters

- **`command`**: Python interpreter command (uses virtual environment path)
- **`args`**: Server script path and arguments
- **`cwd`**: Working directory for the server
- **`env`**: Environment variables (PYTHONPATH, AWS_PROFILE, etc.)

### Testing Your Configuration

1. **Manual test**: Run the server directly to ensure it starts
2. **Check Amazon Q CLI**: Use `@tools` command to see available tools
3. **Test commands**: Try using the generated tools through Amazon Q CLI

## Tools

{% for tool_name, tool in config.tools.items() %}
{% set func_name = tool_name.lower().replace('-', '_') %}
{% set resolved_args = config.get_resolved_arguments(tool_name) %}

### {{ tool_name }}

{{ tool.desc }}

**Function**: `{{ func_name }}`

**Arguments**:
{% for arg in resolved_args %}
- `{{ arg.name }}` ({{ arg.type }}): {{ arg.help }}{% if arg.default is not none %} [default: {{ arg.default }}]{% endif %}{% if arg.choices %} [choices: {{ arg.choices }}]{% endif %}
{% endfor %}

**Command**: `{{ tool.cmd }}`

{% endfor %}

## Configuration

This server was generated from a YAML configuration file. The server exposes shell commands as MCP tools with the following features:

- Jinja2 template support for dynamic command generation
- Argument validation with patterns and choices
- Environment variable support
- Error handling and timeout protection

## Server Information

- **Name**: {{ config.server.name }}
- **Version**: {{ config.server.version }}
- **Description**: {{ config.server.desc }}
- **Tools**: {{ config.tools|length if config.tools else 0 }}